# GitHub Copilot Agent mode 活用ワークショップ

このワークショップは、GitHub Copilot を活用した体系的な開発手法を学ぶ実践型学習プログラムです。  
「Vibe Coding」と呼ばれる曖昧な指示での AI 活用を試すところから始め、Vibe Coding から脱却し、明確な仕様からコードを生成するスペック駆動開発へと導きます。  
具体的には、要件定義および設計書作成から実装・テストまでの完全な開発フローにおける Agent mode のフル活用する方法を体験します。  
本ワークショップでのアプリ開発を通じて、AI エージェントとの効果的な協働方法やコンテキスト管理、TDD 実践などの実用的なスキルを習得でき、実務に直結する AI の使い方を学ぶことができます。

## 実施環境

- GitHub アカウント
- GitHub Copilot のライセンス
  - Free プランでも参加可能ですが利用回数制限によりワークショップ内容をスムーズに実施できない可能性があるため、可能であれば Pro 以上の有料プランをご準備いただくことを推奨します
- Visual Studio Code + GitHub Copilot 拡張機能 + GitHub Copilot Chat 拡張機能
  - Visual Studio Code の設定にカスタムインストラクションがあれば予め除外しておくことを推奨します
- （推奨）言語実行環境
  - 本ワークショップ内で作成するアプリケーションの言語・フレームワークは好みのものを使用いただいて構いませんが、使用する言語の実行環境（SDK のインストール等）が揃っていることをご確認ください
  - 実行環境をあまり気にしたくない場合は、HTML/CSS/JS でお試しください

## 進め方

- 今回は「Web ブラウザで利用できる ToDo アプリケーション（言語やフレームワークは不問）」の作成をお題とし、下記機能を持つことを目標とします
  - ToDo アイテムの CRUD 処理が行えること
  - ToDo アイテムは Status（Todo, Doing, Completed を区別できる）プロパティを持つこと
  - ToDo アイテムを Status 値ごとに区分けして表示する画面を持つこと
- **Copilot Chat は、基本的に Agent mode を使用します**
  - Ask mode とお間違えのないようご注意ください
  - 推奨モデルは、Claude Sonnet (3.5 / 4) または GPT-5 です。プレミアムリクエストを気にされる場合はデフォルトモデルでも全く構いません
- おすすめの進め方は、「1 プロンプト実行ごと（Accept (Keep) した場合のみで構いません）に、使用したプロンプト文章をコミットメッセージとして、差分のコミットを残す」です

## Step1：最初からエージェントでコーディング

- GitHub リポジトリを新規で作成し、作業環境に clone してください
- 本ワークショップでは、Git のコミットを残しながら作業を進めることを推奨します
- `vibe-coding` ブランチを作成し、チェックアウトしてください
- まずは曖昧（十分でない）な内容のまま Copilot Agent mode にコーディングを指示します
- 期待した内容と異なるアプリケーションが作られることを確認します
- `vibe-coding` ブランチに、ここまでの内容をコミットしておきます
  - 以降、Step1 の内容は使用しません。後続ステップで作成する成果物と比較するための参考として残しておきます

## Step2：スペック駆動開発の説明、ドキュメントの作成

### `.github/copilot-instructions.md` の準備

- main ブランチから `spec-driven` ブランチを作成します
  - Step2 以降、この `spec-driven` ブランチを使用して最後のステップまで進めます
- `.github/copilot-instructions.md` を作成します
  - 例えば、エージェントの振る舞い方や使用する技術に関する情報（コーディング規約など）を記載するよう Copilot に指示します
  - https://github.com/github/awesome-copilot/tree/main/instructions もご参考ください

### ドキュメント作成

- このパートでは、仕様に関する以下のドキュメントを、Agent mode を使用して作成します。下記 2 ファイルの説明を把握したうえ、以降の手順で `.prompt.md` ファイルを用意し、作成を進めましょう
  - `docs/requirements.md` ：要件定義（アプリケーションやそれぞれの機能がどうあるべきか）（必須）
  - `docs/application.md` ：設計に関するアプリケーション構成、データモデルなど（必須）
- 上記 2 つの docs を作成するためのプロンプトをファイルに定義します
  - VSCode のコマンドパレットを開き（Ctrl + Shift + P）、 `Chat: New Prompt File...` （`チャット: 新しいプロンプト ファイル...`）を実行します
  - 作成先を `.github/prompts` とし、下記 2 ファイルを作成します
    - `.github/prompts/requirements.prompt.md` ：requirements.md の作成を指示するプロンプト
    - `.github/prompts/application.prompt.md` ：application.md の作成を指示するプロンプト
- 作成したプロンプトを VSCode の Copilot Chat から実行します
  - それぞれ `/requirements` 、 `/application` で実行可能です
- ここまでの内容を一度コミットしておきます

### ドキュメント更新

> [!TIP]
> 慣れている方は「Copilot に一度設計に関する一般的な質問をさせ、その質問に対する回答をコンテキストに含める形で提供する」という手法もお試しください。より自分が意図したドキュメント内容に近づけやすくなります。

- `docs` 配下に作成されたドキュメントを確認し、内容に不足があれば、エージェントに改善するよう指示します
  - 再度 `/requirements` や `/application` を用いて更新の指示を行います
  - 再度 `/requirements` や `/application` を実行して更新を指示します
  - このとき、必ず参照してほしいコンテキストを `#file` （ `#` の後にファイル名を入力し Tab を押すと `#file:(ファイル名)` 形式になります）を使用するか直接パスをプロンプトに含める形で明示することも検討しましょう
- 完成したドキュメントを繰り返し確認します
  - 満足できない場合はプロンプトを調整したうえ再実行します（2~3 回は確認させて結果を見てみましょう）
  - もし既存ファイルの更新でなかなか想定と合わない場合は、一度ファイルを削除して作り直すことも検討しましょう
- ここまでの内容を一度コミットしておきます

## Step3：最初のコーディング

- `docs` 配下にあるドキュメントに基づいてコーディングするよう、エージェントに指示します
  - プロンプトファイル `.github/prompts/development.prompt.md` を作成し、実装の指示をするためのプロンプト内容を定義します
  - Copilot Chat から `/development` で実行します
- アプリケーションが実行できることが確認できるまで Copilot を使って修正を繰り返し、必要に応じて随時手作業で修正を行います
  - 必要に応じて、合間にコミットを行ってください
- ToDo アプリケーションとして正しく動作する状態になるまで、実装指示を繰り返します
  - もし `docs` 配下の内容と異なる実装がされた場合は、再度 `docs` を参照させ不足している実装を把握させたうえで、その続きを実装させます

## Step4：テストコードの追加

- `.github/prompts/testing.prompt.md` を作成し、テストコードの実装指示プロンプトを定義します
- 最終的にすべてのテストがパスするように、エージェントへの指示内容を工夫しながら繰り返し実装指示を実行します
  - 必要に応じて、合間にコミットを行ってください。最終的に完成した内容についても、コミットを行いましょう

## Step5：新機能の追加

- これまでのやり方を踏まえ、アプリケーションに新機能を追加します
  - あまり大きな機能でなく、まずはちょっとした機能にしましょう
  - 新機能に関するドキュメントをエージェントとともに作成・更新してからコーディングを行います
    - 実装に関しても、例えば `.github/prompts/new-feature.prompt.md` を作成したうえプロンプトを再利用して実装を進めましょう
    - 実装の際、思ったような内容にならなかった場合の一つの方法として、その状態から修正させるのではなく「思い切ってファイルまたはディレクトリを削除したりコミットを戻したりしてゼロから作り直させる」ことも検討しましょう
- アプリケーションが実行できることが確認できるまで Copilot を使って修正を繰り返し、必要に応じて随時手作業で修正を行います
  - 必要に応じて、合間にコミットを行ってください。最終的に完成した内容についても、コミットを行いましょう
- Step4 で作成した `/testing` を Copilot Chat から使用する形で、新機能に対する単体テストを追加で実装しましょう

## Step6：GitHub Actions ワークフローの実装

- （オプション）Microsoft Learn MCP Server を登録しておくと、GitHub Actions のワークフロー構文に関する情報を Microsoft Learn から効率的に取得できます
  - https://learn.microsoft.com/ja-jp/training/support/mcp
- CI/CD に関するドキュメント（ `docs/cicd.md` ）を作成します
  - ワークショップ時間を加味して、まずは CI のみの実装で構いませんが、CD にもチャレンジする場合はインフラ定義に関するドキュメント `docs/infrastructure.md` も併せて用意することを推奨します
- GitHub Actions ワークフローを実装するためのプロンプトを `.github/prompts/workflow.prompt.md` として作成します
- Copilot Chat から `/workflow` を実行し、ワークフローを実装して必要に応じて繰り返し修正します

## 参考

- Specification-Driven Development については、spec-kit リポジトリ内のドキュメントも併せてご参考ください
  - https://github.com/github/spec-kit/blob/main/spec-driven.md
- GitHub Copilot で使用する各プロンプト内容に関しては、awesome-copilot リポジトリも併せてご参考ください
  - https://github.com/github/awesome-copilot
